commflags = -02 -pipe -Wall -Wextra -pedantic -Werror -Wshadow -m32 -fstack-protextor -fsanitize-undefined-trap-on-error -fstack-check -fwrapv -Wshadow -Wpointer-arith -Wunreachable-code -Wpointer-arith -Wwrite-strings -Wfloat-equal -Wstrict-overflow=5

cc = gcc $(commflags)
cxx = g++ $(commflags)

: foreach src/*.c |> ^ cc %f -o %o ^ $(cc) -c %f -o %o |> build/%B.o {obj}
: foreach src/*.cpp |> ^ cxx %f -o %o ^ $(cxx) -c %f -o %o |> build/%B.o {obj}
