commflags = -O2 -pipe -m32 -I.

warns += -Wall -Wextra -pedantic -Werror
warns += -Wshadow -Wpointer-arith -Wunreachable-code -Wwrite-strings -Wfloat-equal -Wstrict-overflow=5
feats += -fstack-protector -fsanitize-undefined-trap-on-error -fstack-check -fwrapv 

cxx = g++ -std=c++14 $(commflags) $(warns) $(feats)

: foreach core/*.cpp expt/*.cpp |> ^ cxx %f -o %o ^ $(cxx) -c %f -o %o |> build/%B.o {obj}
